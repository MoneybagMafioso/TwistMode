<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>TwistMode â€“ Limited Drop</title>
  <link rel="stylesheet" href="style.css"/>
</head>

<body>
  <div class="cart-ui" id="cart-toggle">
  ðŸ’ˆ <span id="cart-count">0</span>
</div>

<!-- HERO -->
<header class="hero">

  <p class="micro">Hand printed. Small batch. Built by a barber.</p>

  <video autoplay muted loop playsinline class="hero-video">
    <source src="assets/videos/hero-2.mp4" type="video/mp4">
  </video>

  <div class="hero-content">
    <h1>TwistMode</h1>
    <p class="tagline">Built by a working barber for clean, consistent texture.</p>
    <p class="limited">First Drop Â· Limited Quantity</p>
    <a href="#products" class="btn">Pre-Order Now</a>
  </div>

</header>


<!-- WASHING -->
<section class="section">
  <h2>Rinses Clean Between Clients</h2>
  <video autoplay muted loop playsinline>
    <source src="assets/videos/washing.mp4" type="video/mp4">
  </video>
  <p class="section-text">
    Unlike foam sponges, TwistMode rinses instantly. No trapped dirt. No buildup.
  </p>
</section>


<!-- PROBLEM / UPGRADE -->
<section class="section">
  <h2>The Problem</h2>
  <p class="section-text problem-upgrade">
    Foam sponges trap dirt, oil, and product â€” and that goes on every client.
  </p>

  <h2>The Upgrade</h2>
  <p class="section-text">
    TwistMode rinses clean in seconds, keeps texture consistent,
    and is built for real barbershop hygiene.
  </p>
</section>


<!-- FLEX -->
<section class="section">
  <h2>Flexible. Durable. Built Different.</h2>
  <video autoplay muted loop playsinline>
    <source src="assets/videos/flex-shot.mp4" type="video/mp4">
  </video>
</section>


<!-- COMPARISON -->
<section class="section">

  <h2>Why Barbers Are Switching</h2>

  <div class="comparison-container">
    <img src="assets/images/sponge.jpg">

    <div class="comparison-overlay">
      <img src="assets/images/foam-dirty.jpg">
    </div>

    <div class="comparison-divider"></div>

    <input type="range" min="0" max="100" value="50" class="comparison-slider">
  </div>

</section>


<!-- BUILT IN SHOP -->
<section class="section">
  <h2>Built in the Shop</h2>
  <p class="section-text">
    I created TwistMode after seeing how fast foam sponges break down
    and collect dirt. I needed something cleaner, stronger,
    and built for real barbershop use.
  </p>
</section>


<!-- HOW IT WORKS -->
<section class="section">
  <h2>How It Works</h2>
  <video autoplay muted loop playsinline class="how-video">
    <source src="assets/videos/twist-on-client.mp4" type="video/mp4">
  </video>

  <ol class="how-steps">
    <li>Insert into hair</li>
    <li>Twist gently</li>
    <li>Clean, consistent texture</li>
  </ol>
</section>


<!-- LITE (MOVED HERE ON PURPOSE) -->
<section class="section lite-hero">

  <h2>TwistMode Lite</h2>

  <video autoplay muted loop playsinline class="lite-video">
    <source src="assets/videos/hero-lite.mp4" type="video/mp4">
  </video>

  <p class="section-text">
    Perfect for starter lengths, kids, and tighter control.
  </p>

</section>


<!-- DROP COUNTER -->
<div class="drop-counter">
  <p><strong><span id="sold-count">0</span></strong> of 100 units claimed in the first drop</p>
</div>


<!-- PRODUCTS -->
<section class="section products" id="products">

  <!-- LITE -->
  <div class="card">

    <img src="assets/images/lite-twistmode.jpg" class="product-img">

    <h3>TwistMode Lite</h3>
    <p>For starter & short hair Â· Kid friendly</p>
    <p class="price">$14.99</p>

    <p class="scarcity" data-product="lite"></p>

    <button class="btn small open-modal">Get Drop Access</button>

    <button
      class="btn small preorder-btn"
      data-product="lite"
      data-price="14.99"
      data-price-id="price_1T22lRQVzg9AuHq0tMt1qdCJ"
      data-name="TwistMode Lite">
      Pre-Order
    </button>

  </div>


  <!-- XL -->
  <div class="card">

    <img src="assets/images/sponge.jpg" class="product-img">

    <h3>TwistMode XL</h3>
    <p>For longer & mature afros Â· Faster twisting</p>
    <p class="price">$29.99</p>

    <p class="scarcity" data-product="xl"></p>

    <button class="btn small open-modal">Get Drop Access</button>

    <button
      class="btn small preorder-btn"
      data-product="xl"
      data-price-id="price_1T22ulQVzg9AuHq0F9BiKkGN"
      data-price="29.99"
      data-name="TwistMode XL">
      Pre-Order
    </button>

  </div>


  <!-- BUNDLE -->
  <div class="card">

    <div class="bundle-images">
      <img src="assets/images/lite-twistmode.jpg">
      <img src="assets/images/sponge.jpg">
    </div>

    <h3>TwistMode Bundle</h3>
    <p>Lite + XL Â· Complete shop setup</p>
    <p class="price">$39.99</p>

    <p class="scarcity" data-product="bundle"></p>

    <button class="btn small open-modal">Get Drop Access</button>

    <button
      class="btn small preorder-btn"
      data-product="bundle"
      data-price-id="price_1T23GbQVzg9AuHq0qEgFeqUb"
      data-price="39.99"
      data-name="TwistMode Bundle">
      Pre-Order
    </button>

  </div>

</section>


<!-- EMAIL SECTION -->
<section class="section drop-access">

  <h2>Missed This Drop?</h2>

  <p class="section-text">
    Join the list and get first access before the next batch goes live.
  </p>

  <button class="btn open-modal">Get Next Drop Access</button>

</section>


<!-- SHIPPING -->
<section class="section">

  <h2>Shipping</h2>

  <p class="section-text">
    Ships in 7â€“14 days.
    Each TwistMode is printed in small batches for quality.
  </p>

</section>

<section class="section cart-section" id="checkout">

  <h2>Your Cart</h2>

  <div class="cart-box">

    <div id="cart-items"></div>

    <p id="cart-total">Total: $0.00</p>


    <button class="btn" id="checkout-btn">
      Checkout
    </button>

  </div>

</section>



<!-- FOOTER -->
<footer>
  <div class="footer-inner">
    <h3>TwistMode</h3>
    <p>Built by a barber. Designed for texture.</p>
    <p class="copyright">Â© 2026 TwistMode</p>
  </div>
</footer>

<!-- EMAIL MODAL -->
<div class="modal" id="emailModal">
  <div class="modal-content">
    <span class="close-modal">&times;</span>
    <h3>Join The Next Drop</h3>
    <p style="color:#aaa; margin-bottom:20px;">
      Get early access before the next batch sells out.
    </p>

    <form action="https://formspree.io/f/xkovjzkl" method="POST">
      <input 
        type="email" 
        name="email" 
        placeholder="Enter your email"
        required
      >
      <button type="submit" class="btn small">
      Join list  
      </button>
    </form>
  </div>
</div>


<script src="https://js.stripe.com/v3/"></script>

<script>
document.addEventListener("DOMContentLoaded", () => {

const stripe = Stripe("pk_test_51T22WcQVzg9AuHq0Y1QxQojA7Xg1FXTkzUD95VGYr7Do5wlDijynnTL2SWxvyKHyzP7kwyb6NIanLiv099eomaTf00KLfmo6oC"); // your key

/* SCROLL ANIMATION */
const sections = document.querySelectorAll(".section");
window.addEventListener("scroll", () => {
  sections.forEach(section => {
    if (section.getBoundingClientRect().top < window.innerHeight - 100) {
      section.classList.add("visible");
    }
  });
});

/* STOCK SYSTEM */
let stock = {
  lite: 50,
  xl: 50
};

const maxDrop = 100;
const soldCounter = document.getElementById("sold-count");
const stockText = document.querySelectorAll(".scarcity");
const buttons = document.querySelectorAll(".preorder-btn");

function updateUI() {

  stockText.forEach(item => {

    const type = item.dataset.product;

    let value =
      type === "bundle"
        ? Math.min(stock.lite, stock.xl)
        : stock[type];

    item.textContent = value > 0
      ? `Only ${value} left in first drop`
      : "Sold Out";

    const card = item.closest(".card");
    if (!card) return;

    const preorderBtn = card.querySelector(".preorder-btn");
    const waitlistBtn = card.querySelector(".open-modal");

    preorderBtn.style.display = value === 0 ? "none" : "inline-block";
    waitlistBtn.style.display = value === 0 ? "inline-block" : "none";

  });

  const sold = maxDrop - (stock.lite + stock.xl);
  if (soldCounter) soldCounter.textContent = sold;

  localStorage.setItem("twistStock", JSON.stringify(stock));
}

updateUI();

/* CART */
let cart = [];

const cartCount = document.getElementById("cart-count");
const cartItems = document.getElementById("cart-items");
const cartTotal = document.getElementById("cart-total");
const checkoutBtn = document.getElementById("checkout-btn");
const cartToggle = document.getElementById("cart-toggle");
const cartSection = document.getElementById("checkout");

cartToggle.addEventListener("click", () => {
  cartSection.scrollIntoView({ behavior: "smooth" });
});

/* ADD TO CART */
buttons.forEach(button => {

  button.addEventListener("click", (e) => {

    e.preventDefault();

    const type = button.dataset.product;
    const name = button.dataset.name;
    const price = parseFloat(button.dataset.price);
    const priceId = button.dataset.priceId;

    /* STOCK REDUCTION */
    if (type === "bundle") {
      if (stock.lite > 0 && stock.xl > 0) {
        stock.lite--;
        stock.xl--;
      } else return;
    } else {
      if (stock[type] > 0) stock[type]--;
      else return;
    }

    /* ADD / INCREMENT CART */
    const existingItem = cart.find(item => item.priceId === priceId);

    if (existingItem) {
      existingItem.qty++;
    } else {
      cart.push({ name, price, priceId, qty: 1 });
    }

    updateUI();
    updateCartUI();

  });

});

/* UPDATE CART UI */
function updateCartUI() {

  cartItems.innerHTML = "";

  let subtotal = 0;
  let totalQty = 0;

  cart.forEach((item, index) => {

    subtotal += item.price * item.qty;
    totalQty += item.qty;

    cartItems.innerHTML += `
      <div class="cart-row">
        <span>${item.name}</span>

        <div class="qty-controls">
          <button onclick="changeQty(${index}, -1)">â€“</button>
          <span>${item.qty}</span>
          <button onclick="changeQty(${index}, 1)">+</button>
        </div>

        <span>$${(item.price * item.qty).toFixed(2)}</span>
      </div>
    `;
  });

  cartCount.textContent = totalQty;

  const freeShipThreshold = 75;

  let shipping = 0;
  let awayHTML = "";

  if (subtotal === 0) {
    shipping = 0;
  }
  else if (subtotal >= freeShipThreshold) {
    shipping = 0;
    awayHTML = `<p class="free-ship-msg">ðŸŽ‰ You unlocked FREE shipping!</p>`;
  }
  else {
    shipping = 5;
    const amountAway = (freeShipThreshold - subtotal).toFixed(2);
    awayHTML = `<p class="free-ship-msg">You're $${amountAway} away from free shipping ðŸšš</p>`;
  }

  const finalTotal = subtotal + shipping;

  cartTotal.innerHTML =
    "Subtotal: $" + subtotal.toFixed(2) +
    "<br>Shipping: $" + shipping.toFixed(2) +
    "<br><strong>Total: $" + finalTotal.toFixed(2) + "</strong>" +
    awayHTML;
}

/* QTY */
window.changeQty = function(index, amount) {

  cart[index].qty += amount;

  if (cart[index].qty <= 0) {
    cart.splice(index, 1);
  }

  updateCartUI();
};

/* CHECKOUT â†’ STRIPE PAYMENT LINK */
checkoutBtn.addEventListener("click", async () => {

  if (cart.length === 0) {
    alert("Your cart is empty");
    return;
  }

  const response = await fetch("https://shoptwistmode.com/create-checkout", {
    method: "POST",
    headers: {
      "Content-Type": "application/json"
    },
    body: JSON.stringify({ cart })
  });

  const data = await response.json();

  window.location.href = data.url;

});

 /* COMPARISON SLIDER */

  const slider = document.querySelector(".comparison-slider");
  const overlay = document.querySelector(".comparison-overlay");
  const divider = document.querySelector(".comparison-divider");
  const container = document.querySelector(".comparison-container");

  function moveSlider(x) {
    let rect = container.getBoundingClientRect();
    let percent = ((x - rect.left) / rect.width) * 100;
    percent = Math.max(0, Math.min(100, percent));
    overlay.style.width = percent + "%";
    divider.style.left = percent + "%";
    slider.value = percent;
  }

  if (slider && overlay && divider && container) {

    slider.addEventListener("input", e => {
      overlay.style.width = e.target.value + "%";
      divider.style.left = e.target.value + "%";
    });

    container.addEventListener("touchmove", e => {
      moveSlider(e.touches[0].clientX);
    });
  }
});
</script>

</body>
</html>
